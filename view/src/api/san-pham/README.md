# API Qu·∫£n L√Ω S·∫£n Ph·∫©m

## üìÅ C·∫•u tr√∫c th∆∞ m·ª•c

```
view/src/api/san-pham/
‚îú‚îÄ‚îÄ index.ts          # Export t·∫•t c·∫£ API
‚îú‚îÄ‚îÄ danh-muc.ts       # API cho danh m·ª•c s·∫£n ph·∫©m
‚îú‚îÄ‚îÄ bien-the.ts       # API cho bi·∫øn th·ªÉ s·∫£n ph·∫©m
‚îî‚îÄ‚îÄ thuoc-tinh/       # Folder ch·ª©a c√°c API thu·ªôc t√≠nh
    ‚îú‚îÄ‚îÄ nha-san-xuat.ts
    ‚îú‚îÄ‚îÄ chat-lieu.ts
    ‚îú‚îÄ‚îÄ mau-sac.ts
    ‚îú‚îÄ‚îÄ kich-thuoc.ts
    ‚îú‚îÄ‚îÄ xuat-xu.ts
    ‚îú‚îÄ‚îÄ trong-luong.ts
    ‚îî‚îÄ‚îÄ de-giay.ts
```

## üîß C√°ch s·ª≠ d·ª•ng

### Import API

```typescript
import {
  // Thu·ªôc t√≠nh s·∫£n ph·∫©m
  getNhaSanXuatList,
  getChatLieuList,
  getMauSacList,
  getKichThuocList,
  getXuatXuList,
  getTrongLuongList,
  getDeGiayList,

  // Danh m·ª•c s·∫£n ph·∫©m
  getDanhMucSanPhamList,
  getNhaSanXuatOptions,
  getXuatXuOptions,

  // Bi·∫øn th·ªÉ s·∫£n ph·∫©m
  getBienTheSanPhamList,
  uploadAnhBienThe,
  getSanPhamOptions,
  getMauSacOptions,
  getKichThuocOptions,
  getChatLieuOptions,
  getDeGiayOptions,
  getTrongLuongOptions,
} from '@/api/san-pham'

// Ho·∫∑c import t·ª´ t·ª´ng file ri√™ng l·∫ª (bao g·ªìm c·∫£ interface)
import { getNhaSanXuatList, NhaSanXuat, NhaSanXuatParams } from '@/api/san-pham/thuoc-tinh/nha-san-xuat'

import { getChatLieuList, ChatLieu, ChatLieuParams } from '@/api/san-pham/thuoc-tinh/chat-lieu'
// ...
```

## üìã API Endpoints

### üé® Thu·ªôc t√≠nh s·∫£n ph·∫©m (`thuoc-tinh/`)

#### Nh√† s·∫£n xu·∫•t (`nha-san-xuat.ts`)

- `GET /api/san-pham/thuoc-tinh/nha-san-xuat` - L·∫•y danh s√°ch nh√† s·∫£n xu·∫•t
- `GET /api/san-pham/thuoc-tinh/nha-san-xuat/:id` - L·∫•y chi ti·∫øt nh√† s·∫£n xu·∫•t
- `POST /api/san-pham/thuoc-tinh/nha-san-xuat` - T·∫°o nh√† s·∫£n xu·∫•t m·ªõi
- `PUT /api/san-pham/thuoc-tinh/nha-san-xuat/:id` - C·∫≠p nh·∫≠t nh√† s·∫£n xu·∫•t
- `DELETE /api/san-pham/thuoc-tinh/nha-san-xuat/:id` - X√≥a nh√† s·∫£n xu·∫•t

#### Ch·∫•t li·ªáu (`chat-lieu.ts`)

- `GET /api/san-pham/thuoc-tinh/chat-lieu` - L·∫•y danh s√°ch ch·∫•t li·ªáu
- `GET /api/san-pham/thuoc-tinh/chat-lieu/:id` - L·∫•y chi ti·∫øt ch·∫•t li·ªáu
- `POST /api/san-pham/thuoc-tinh/chat-lieu` - T·∫°o ch·∫•t li·ªáu m·ªõi
- `PUT /api/san-pham/thuoc-tinh/chat-lieu/:id` - C·∫≠p nh·∫≠t ch·∫•t li·ªáu
- `DELETE /api/san-pham/thuoc-tinh/chat-lieu/:id` - X√≥a ch·∫•t li·ªáu

#### M√†u s·∫Øc (`mau-sac.ts`)

- `GET /api/san-pham/thuoc-tinh/mau-sac` - L·∫•y danh s√°ch m√†u s·∫Øc
- `GET /api/san-pham/thuoc-tinh/mau-sac/:id` - L·∫•y chi ti·∫øt m√†u s·∫Øc
- `POST /api/san-pham/thuoc-tinh/mau-sac` - T·∫°o m√†u s·∫Øc m·ªõi
- `PUT /api/san-pham/thuoc-tinh/mau-sac/:id` - C·∫≠p nh·∫≠t m√†u s·∫Øc
- `DELETE /api/san-pham/thuoc-tinh/mau-sac/:id` - X√≥a m√†u s·∫Øc

#### K√≠ch th∆∞·ªõc (`kich-thuoc.ts`)

- `GET /api/san-pham/thuoc-tinh/kich-thuoc` - L·∫•y danh s√°ch k√≠ch th∆∞·ªõc
- `GET /api/san-pham/thuoc-tinh/kich-thuoc/:id` - L·∫•y chi ti·∫øt k√≠ch th∆∞·ªõc
- `POST /api/san-pham/thuoc-tinh/kich-thuoc` - T·∫°o k√≠ch th∆∞·ªõc m·ªõi
- `PUT /api/san-pham/thuoc-tinh/kich-thuoc/:id` - C·∫≠p nh·∫≠t k√≠ch th∆∞·ªõc
- `DELETE /api/san-pham/thuoc-tinh/kich-thuoc/:id` - X√≥a k√≠ch th∆∞·ªõc

#### Xu·∫•t x·ª© (`xuat-xu.ts`)

- `GET /api/san-pham/thuoc-tinh/xuat-xu` - L·∫•y danh s√°ch xu·∫•t x·ª©
- `GET /api/san-pham/thuoc-tinh/xuat-xu/:id` - L·∫•y chi ti·∫øt xu·∫•t x·ª©
- `POST /api/san-pham/thuoc-tinh/xuat-xu` - T·∫°o xu·∫•t x·ª© m·ªõi
- `PUT /api/san-pham/thuoc-tinh/xuat-xu/:id` - C·∫≠p nh·∫≠t xu·∫•t x·ª©
- `DELETE /api/san-pham/thuoc-tinh/xuat-xu/:id` - X√≥a xu·∫•t x·ª©

#### Tr·ªçng l∆∞·ª£ng (`trong-luong.ts`)

- `GET /api/san-pham/thuoc-tinh/trong-luong` - L·∫•y danh s√°ch tr·ªçng l∆∞·ª£ng
- `GET /api/san-pham/thuoc-tinh/trong-luong/:id` - L·∫•y chi ti·∫øt tr·ªçng l∆∞·ª£ng
- `POST /api/san-pham/thuoc-tinh/trong-luong` - T·∫°o tr·ªçng l∆∞·ª£ng m·ªõi
- `PUT /api/san-pham/thuoc-tinh/trong-luong/:id` - C·∫≠p nh·∫≠t tr·ªçng l∆∞·ª£ng
- `DELETE /api/san-pham/thuoc-tinh/trong-luong/:id` - X√≥a tr·ªçng l∆∞·ª£ng

#### ƒê·∫ø gi√†y (`de-giay.ts`)

- `GET /api/san-pham/thuoc-tinh/de-giay` - L·∫•y danh s√°ch ƒë·∫ø gi√†y
- `GET /api/san-pham/thuoc-tinh/de-giay/:id` - L·∫•y chi ti·∫øt ƒë·∫ø gi√†y
- `POST /api/san-pham/thuoc-tinh/de-giay` - T·∫°o ƒë·∫ø gi√†y m·ªõi
- `PUT /api/san-pham/thuoc-tinh/de-giay/:id` - C·∫≠p nh·∫≠t ƒë·∫ø gi√†y
- `DELETE /api/san-pham/thuoc-tinh/de-giay/:id` - X√≥a ƒë·∫ø gi√†y

### üì¶ Danh m·ª•c s·∫£n ph·∫©m (`danh-muc.ts`)

- `GET /api/san-pham/danh-muc` - L·∫•y danh s√°ch s·∫£n ph·∫©m
- `GET /api/san-pham/danh-muc/:id` - L·∫•y chi ti·∫øt s·∫£n ph·∫©m
- `POST /api/san-pham/danh-muc` - T·∫°o s·∫£n ph·∫©m m·ªõi
- `PUT /api/san-pham/danh-muc/:id` - C·∫≠p nh·∫≠t s·∫£n ph·∫©m
- `DELETE /api/san-pham/danh-muc/:id` - X√≥a s·∫£n ph·∫©m
- `GET /api/san-pham/danh-muc/nha-san-xuat/options` - L·∫•y danh s√°ch nh√† s·∫£n xu·∫•t cho dropdown
- `GET /api/san-pham/danh-muc/xuat-xu/options` - L·∫•y danh s√°ch xu·∫•t x·ª© cho dropdown

### üîÑ Bi·∫øn th·ªÉ s·∫£n ph·∫©m (`bien-the.ts`)

- `GET /api/san-pham/bien-the` - L·∫•y danh s√°ch bi·∫øn th·ªÉ s·∫£n ph·∫©m
- `GET /api/san-pham/bien-the/:id` - L·∫•y chi ti·∫øt bi·∫øn th·ªÉ
- `POST /api/san-pham/bien-the` - T·∫°o bi·∫øn th·ªÉ m·ªõi
- `PUT /api/san-pham/bien-the/:id` - C·∫≠p nh·∫≠t bi·∫øn th·ªÉ
- `DELETE /api/san-pham/bien-the/:id` - X√≥a bi·∫øn th·ªÉ
- `POST /api/san-pham/bien-the/upload-anh` - Upload ·∫£nh cho bi·∫øn th·ªÉ
- `DELETE /api/san-pham/bien-the/:idBienThe/anh/:idAnh` - X√≥a ·∫£nh bi·∫øn th·ªÉ

#### Options cho dropdown:

- `GET /api/san-pham/bien-the/san-pham/options` - Danh s√°ch s·∫£n ph·∫©m
- `GET /api/san-pham/bien-the/mau-sac/options` - Danh s√°ch m√†u s·∫Øc
- `GET /api/san-pham/bien-the/kich-thuoc/options` - Danh s√°ch k√≠ch th∆∞·ªõc
- `GET /api/san-pham/bien-the/chat-lieu/options` - Danh s√°ch ch·∫•t li·ªáu
- `GET /api/san-pham/bien-the/de-giay/options` - Danh s√°ch ƒë·∫ø gi√†y
- `GET /api/san-pham/bien-the/trong-luong/options` - Danh s√°ch tr·ªçng l∆∞·ª£ng

## üìù Tham s·ªë truy v·∫•n (Query Parameters)

### Pagination

- `page`: S·ªë trang (b·∫Øt ƒë·∫ßu t·ª´ 0)
- `size`: S·ªë b·∫£n ghi m·ªói trang

### Filtering

- `search`: T·ª´ kh√≥a t√¨m ki·∫øm
- `trangThai`: Tr·∫°ng th√°i (true/false)
- `idNhaSanXuat`: ID nh√† s·∫£n xu·∫•t
- `idXuatXu`: ID xu·∫•t x·ª©
- `giaTu`: Gi√° t·ª´
- `giaDen`: Gi√° ƒë·∫øn

## üöÄ V√≠ d·ª• s·ª≠ d·ª•ng

### Load danh m·ª•c s·∫£n ph·∫©m v·ªõi filter

```typescript
import { getDanhMucSanPhamList } from '@/api/san-pham'

const loadDanhMuc = async () => {
  try {
    const response = await getDanhMucSanPhamList({
      page: 1,
      size: 10,
      search: 'Nike',
      trangThai: true,
      giaTu: 100000,
      giaDen: 1000000,
    })

    console.log('Danh m·ª•c s·∫£n ph·∫©m:', response.data.content)
    console.log('T·ªïng s·ªë:', response.data.totalElements)
  } catch (error) {
    console.error('L·ªói khi t·∫£i danh m·ª•c:', error)
  }
}
```

### Load options cho dropdown

```typescript
import { getNhaSanXuatOptions, getXuatXuOptions } from '@/api/san-pham'

const loadOptions = async () => {
  const [nhaSanXuat, xuatXu] = await Promise.all([getNhaSanXuatOptions(), getXuatXuOptions()])

  console.log('Nh√† s·∫£n xu·∫•t:', nhaSanXuat.data)
  console.log('Xu·∫•t x·ª©:', xuatXu.data)
}
```

### Upload ·∫£nh cho bi·∫øn th·ªÉ

```typescript
import { uploadAnhBienThe } from '@/api/san-pham'

const uploadImage = async (idBienThe: number, files: File[]) => {
  const formData = new FormData()
  formData.append('idBienThe', idBienThe.toString())
  files.forEach((file) => formData.append('files', file))

  try {
    const response = await uploadAnhBienThe(formData)
    console.log('Upload th√†nh c√¥ng:', response.data)
  } catch (error) {
    console.error('L·ªói upload:', error)
  }
}
```

## üîí B·∫£o m·∫≠t v√† x·ª≠ l√Ω l·ªói

- T·∫•t c·∫£ API ƒë·ªÅu s·ª≠ d·ª•ng axios interceptor cho authentication
- Error handling ƒë∆∞·ª£c th·ª±c hi·ªán ·ªü component level
- Validation ƒë∆∞·ª£c th·ª±c hi·ªán c·∫£ frontend v√† backend

## üìä Ph√¢n trang

API s·ª≠ d·ª•ng ph√¢n trang Spring Boot m·∫∑c ƒë·ªãnh:

- `page`: S·ªë trang (0-based)
- `size`: K√≠ch th∆∞·ªõc trang
- Response bao g·ªìm: `content`, `totalElements`, `totalPages`, `size`, `number`

## üì∏ Qu·∫£n l√Ω ·∫£nh s·∫£n ph·∫©m (`anh-san-pham.ts`)

### API Endpoints:

#### **L·∫•y danh s√°ch ·∫£nh s·∫£n ph·∫©m**

```typescript
getAnhSanPhamList(params?: AnhSanPhamParams)
```

- **Method**: GET
- **Endpoint**: `/api/anh-san-pham-management/paging`
- **Params**: `page`, `size`, `search`, `trangThai`

#### **L·∫•y chi ti·∫øt ·∫£nh s·∫£n ph·∫©m**

```typescript
getAnhSanPhamById(id: number)
```

- **Method**: GET
- **Endpoint**: `/api/anh-san-pham-management/detail/{id}`

#### **Upload ·∫£nh s·∫£n ph·∫©m**

```typescript
uploadAnhSanPham(file: File, tenAnh?: string)
```

- **Method**: POST
- **Endpoint**: `/api/anh-san-pham-management/add`
- **Body**: FormData v·ªõi `file` v√† `tenAnh` (optional)

#### **Upload nhi·ªÅu ·∫£nh c√πng l√∫c**

```typescript
uploadNhieuAnhSanPham(files: File[])
```

- **Method**: POST
- **Endpoint**: `/api/anh-san-pham-management/add-multi-image/cloud`
- **Body**: FormData v·ªõi nhi·ªÅu file
- **Return**: `number[]` - Array ID c·ªßa ·∫£nh ƒë√£ upload l√™n Cloudinary

#### **C·∫≠p nh·∫≠t ·∫£nh s·∫£n ph·∫©m**

```typescript
updateAnhSanPham(id: number, data: Partial<AnhSanPham>)
```

- **Method**: PUT
- **Endpoint**: `/api/anh-san-pham-management/update/{id}`

#### **X√≥a ·∫£nh s·∫£n ph·∫©m**

```typescript
deleteAnhSanPham(id: number)
```

- **Method**: PUT
- **Endpoint**: `/api/anh-san-pham-management/update/status/{id}`

#### **L·∫•y t·∫•t c·∫£ ·∫£nh s·∫£n ph·∫©m**

```typescript
getAllAnhSanPham()
```

- **Method**: GET
- **Endpoint**: `/api/anh-san-pham-management/playlist`

### Interface `AnhSanPham`:

```typescript
interface AnhSanPham {
  id: number
  duongDanAnh: string
  tenAnh?: string
  mauAnh?: string
  trangThai: boolean
  deleted: boolean
  createAt?: string
  updateAt?: string
}
```

## üîó ·∫¢nh bi·∫øn th·ªÉ s·∫£n ph·∫©m (trong `bien-the.ts`)

### API Endpoints b·ªï sung:

#### **L·∫•y ·∫£nh c·ªßa bi·∫øn th·ªÉ**

```typescript
getAnhBienThe(idBienThe: number)
```

- **Method**: GET
- **Endpoint**: `/api/chi-tiet-san-pham-anh-management/list/{idBienThe}`

#### **Th√™m ·∫£nh cho bi·∫øn th·ªÉ**

```typescript
themAnhChoBienThe(data: ThemAnhBienTheRequest)
```

- **Method**: POST
- **Endpoint**: `/api/chi-tiet-san-pham-anh-management/add-multiple`
- **Body**: `{ idChiTietSanPham: number, danhSachAnh: number[] }`

#### **X√≥a ·∫£nh kh·ªèi bi·∫øn th·ªÉ**

```typescript
xoaAnhKhoiBienThe(idAnhBienThe: number)
```

- **Method**: PUT
- **Endpoint**: `/api/chi-tiet-san-pham-anh-management/update/status/{idAnhBienThe}`

### Interface c·∫≠p nh·∫≠t:

```typescript
interface BienTheSanPham {
  // kh·ªõp v·ªõi ChiTietSanPhamFullResponse
  id: number
  maChiTietSanPham?: string
  tenSanPham?: string
  anhSanPham?: string[] // List ƒë∆∞·ªùng d·∫´n ·∫£nh (t·ª´ response)
  tenNhaSanXuat?: string
  tenXuatXu?: string
  tenDeGiay?: string
  tenChatLieu?: string
  tenMauSac?: string
  tenKichThuoc?: string
  tenTrongLuong?: string
  soLuong: number
  giaBan: number
  idDotGiamGia?: number
  tenDotGiamGia?: string
  giaTriGiamGia?: number
  trangThai: boolean
  deleted?: boolean
  createAt?: string
  updateAt?: string
  // Th√¥ng tin b·ªï sung t·ª´ entity
  ghiChu?: string
  createBy?: number
  updateBy?: number
}

interface AnhSanPhamBienThe {
  // cho API qu·∫£n l√Ω li√™n k·∫øt ·∫£nh
  id: number
  idAnhSanPham: number
  duongDanAnh: string
  tenAnh?: string
  mauAnh?: string
  trangThai: boolean
}
```

## üîÑ C·∫≠p nh·∫≠t v√† b·∫£o tr√¨

- API ƒë∆∞·ª£c t·ªï ch·ª©c theo module ri√™ng bi·ªát ƒë·ªÉ d·ªÖ b·∫£o tr√¨
- M·ªói thu·ªôc t√≠nh s·∫£n ph·∫©m c√≥ file ri√™ng bi·ªát ƒë·ªÉ qu·∫£n l√Ω t·ªët h∆°n
- TypeScript interfaces ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a r√µ r√†ng v√† kh·ªõp v·ªõi backend models
- Error handling nh·∫•t qu√°n
- Code ƒë∆∞·ª£c comment ƒë·∫ßy ƒë·ªß
- C√≥ th·ªÉ import t·ª´ t·ª´ng file c·ª• th·ªÉ ho·∫∑c t·ª´ index.ts
- **M·ªõi**: H·ªó tr·ª£ ƒë·∫ßy ƒë·ªß qu·∫£n l√Ω ·∫£nh s·∫£n ph·∫©m v√† ·∫£nh bi·∫øn th·ªÉ
- **C·∫≠p nh·∫≠t**: Interface kh·ªõp v·ªõi `/src/model/response` v√† `/src/model/request` t·ª´ backend
- **Cloud Upload**: Upload ·∫£nh s·ª≠ d·ª•ng Cloudinary cho l∆∞u tr·ªØ ƒë√°m m√¢y
