<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Thông báo thay đổi địa chỉ giao hàng</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
			line-height: 1.6;
			color: #1d2129;
			background-color: #f7f8fa;
			padding: 20px;
		}

		.email-container {
			max-width: 600px;
			margin: 0 auto;
			background: #ffffff;
			border-radius: 4px;
			overflow: hidden;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
		}

		.header {
			background: #165DFF;
			color: #ffffff;
			padding: 32px 24px;
			text-align: center;
		}

		.logo {
			height: 36px;
			margin-bottom: 8px;
		}

		.header p {
			font-size: 14px;
			opacity: 0.9;
		}

		.content {
			padding: 32px 24px;
		}

		.greeting {
			margin-bottom: 20px;
			font-size: 16px;
			color: #1d2129;
		}

		.greeting strong {
			color: #165DFF;
		}

		.order-info {
			background-color: #F7F8FA;
			padding: 15px;
			border-radius: 5px;
			margin-bottom: 24px;
			border-left: 3px solid #165DFF;
		}

		.order-code {
			font-weight: bold;
			color: #1d2129;
			font-size: 15px;
		}

		.address-section {
			margin-bottom: 24px;
		}

		.address-section h3 {
			color: #165DFF;
			font-size: 15px;
			margin-bottom: 10px;
			text-transform: uppercase;
			letter-spacing: 0.5px;
		}

		.address-box {
			background-color: #FFFFFF;
			padding: 15px;
			border-radius: 5px;
			border: 1px solid #e0e0e0;
			margin-bottom: 15px;
		}

		.address-box p {
			margin: 5px 0;
			line-height: 1.6;
			color: #555;
		}

		.address-label {
			font-size: 12px;
			color: #999;
			text-transform: uppercase;
			margin-bottom: 5px;
		}

		.surcharge-info {
			background-color: #fff3cd;
			border-left: 3px solid #FF7D00;
			padding: 15px;
			border-radius: 5px;
			margin-bottom: 25px;
		}

		.surcharge-info h4 {
			color: #D46B08;
			font-size: 14px;
			margin-bottom: 8px;
		}

		.surcharge-info.refund {
			background-color: #e6ffed;
			border-left-color: #36c26d;
		}

		.surcharge-info.refund h4 {
			color: #00B42A;
		}

		.surcharge-amount {
			font-size: 18px;
			font-weight: bold;
			color: #FF7D00;
		}

		.surcharge-info.refund .surcharge-amount {
			color: #00B42A;
		}

		.surcharge-note {
			font-size: 13px;
			color: #D46B08;
			margin-top: 8px;
			line-height: 1.5;
		}

		.surcharge-info.refund .surcharge-note {
			color: #00B42A;
		}

		.note-section {
			background-color: #F0F9FF;
			border-left: 3px solid #165DFF;
			padding: 15px;
			border-radius: 5px;
			margin-bottom: 25px;
		}

		.note-section h4 {
			color: #165DFF;
			font-size: 14px;
			margin-bottom: 8px;
		}

		.note-section p {
			font-size: 14px;
			color: #165DFF;
			line-height: 1.6;
		}

		.cta-button {
			display: inline-block;
			background: #165DFF;
			color: #ffffff;
			text-decoration: none;
			padding: 12px 30px;
			border-radius: 4px;
			font-weight: bold;
			margin-bottom: 25px;
			text-align: center;
		}

		.footer {
			background-color: #F7F8FA;
			padding: 20px;
			text-align: center;
			border-top: 1px solid #E5E6EB;
			font-size: 12px;
			color: #86909C;
		}

		.footer p {
			margin: 8px 0;
		}

		.divider {
			height: 2px;
			background: linear-gradient(to right, transparent, #667eea, transparent);
			margin: 20px 0;
		}

		@media (max-width: 600px) {
			.email-container {
				border-radius: 0;
			}

			.header {
				padding: 20px 15px;
			}

			.header h1 {
				font-size: 20px;
			}

			.content {
				padding: 20px 15px;
			}

			.address-box {
				font-size: 14px;
			}
		}
	</style>
</head>

<body>
	<div class="email-container">
		<!-- Header -->
		<div class="header">
			<img class="logo"
				src="https://res.cloudinary.com/dlgbdwd96/image/upload/v1765830968/rrstgsohcmcahazcxizg.png"
				alt="GearUp Logo">
			<p>Thông báo thay đổi địa chỉ giao hàng</p>
		</div>

		<!-- Content -->
		<div class="content">
			<!-- Greeting -->
			<div class="greeting">
				Xin chào <strong th:text="${customerName}">Khách hàng</strong>,
			</div>

			<!-- Order Info -->
			<div class="order-info">
				<span class="address-label">Mã đơn hàng:</span>
				<p class="order-code" th:text="${orderCode}"></p>
			</div>

			<p style="margin-bottom: 15px; color: #555;">
				Chúng tôi xác nhận rằng địa chỉ giao hàng của đơn hàng của bạn đã được cập nhật thành công.
			</p>

			<div class="divider"></div>

			<!-- Old Address -->
			<div class="address-section" th:if="${#strings.isNotEmpty(oldAddress)}">
				<h3>❌ Địa chỉ cũ</h3>
				<div class="address-box">
					<div class="address-label">Địa chỉ giao hàng cũ:</div>
					<p th:text="${oldAddress}"></p>
				</div>
			</div>

			<!-- New Address -->
			<div class="address-section" th:if="${#strings.isNotEmpty(newAddress)}">
				<h3>✅ Địa chỉ mới</h3>
				<div class="address-box">
					<div class="address-label">Địa chỉ giao hàng mới:</div>
					<p th:text="${newAddress}"></p>
				</div>
			</div>

			<!-- Surcharge Info -->
			<div class="surcharge-info" th:if="${surcharge != null and surcharge.signum() > 0}">
				<h4>⚠️ Phí phụ thêm</h4>
				<div class="surcharge-amount"
					th:text="${#numbers.formatDecimal(surcharge, 0, 'COMMA', 0, 'POINT')} + ' ₫'">
				</div>
				<p class="surcharge-note">
					Thay đổi địa chỉ giao hàng làm phát sinh thêm chi phí vận chuyển. Phí phụ thêm sẽ được cộng vào tổng
					giá
					trị
					đơn hàng.
				</p>
			</div>

			<div class="surcharge-info refund" th:if="${surcharge != null and surcharge.signum() < 0}">
				<h4>✅ Chúng tôi hoàn phí cho bạn</h4>
				<div class="surcharge-amount"
					th:text="${#numbers.formatDecimal(surcharge.abs(), 0, 'COMMA', 0, 'POINT')} + ' ₫'"></div>
				<p class="surcharge-note">
					Cước vận chuyển mới thấp hơn so với trước đây nên chúng tôi sẽ hoàn trả phần chênh lệch như trên.
					Khoản
					phí này
					sẽ được xử lý theo chính sách thanh toán hiện hành của đơn hàng.
				</p>
			</div>

			<div class="note-section" th:if="${surcharge == null or surcharge.signum() == 0}">
				<h4>ℹ️ Không phát sinh phí thêm</h4>
				<p>
					Thay đổi địa chỉ giao hàng không làm thay đổi chi phí vận chuyển. Đơn hàng của bạn sẽ tiếp tục được
					xử lý
					theo
					đúng tiến độ.
				</p>
			</div>

			<!-- Important Note -->
			<div class="note-section" th:if="${surcharge != null and surcharge.signum() != 0}">
				<h4>ℹ️ Thông tin quan trọng</h4>
				<p>
					✓ Thay đổi địa chỉ giao hàng đã được cập nhật vào hệ thống<br>
					✓ Chi phí vận chuyển đã được điều chỉnh theo thông tin mới<br>
					✓ Đơn hàng sẽ được giao đến địa chỉ mới
				</p>
			</div>

			<!-- Call to Action -->
			<a href="#" class="cta-button" th:href="${baseUrl}"
				style="color: #ffffff !important; text-decoration: none;">Xem chi tiết đơn hàng</a>

			<p style="color: #666; font-size: 14px; line-height: 1.6; margin-bottom: 15px;">
				Nếu bạn có bất kỳ câu hỏi nào, vui lòng liên hệ với <strong>bộ phận Chăm sóc khách hàng</strong> của
				chúng
				tôi. Chúng tôi luôn sẵn sàng hỗ trợ!
			</p>
		</div>

		<!-- Footer -->
		<div class="footer">
			<p><strong>GearUp - Gear Up Your Style!</strong></p>
			<p>Địa chỉ: FPT Polytechnic, Trịnh Văn Bô, Nam Từ Liêm - TP. Hà Nội</p>
			<p>Email: duyhmph53492@ggmail.com | Hotline: 0332 050 542</p>
			<p style="margin-top: 16px; font-size: 12px;">
				Email này được gửi tự động, vui lòng không trả lời.
			</p>
		</div>
	</div>
</body>

</html>